---
title: "打造随身弱网模拟器：详解 iOS 原生 Network Link Conditioner"
date: 2025-11-25 23:00:00 +0800
categories: [iOS, Network]
tags: [iOS, Network, 弱网测试, iOS开发, iOS测试, 慢网模拟]
description: "一份详尽的指南，教你如何激活并使用 iOS 系统内置的弱网测试工具 Network Link Conditioner，无需电脑即可模拟各种网络环境，甚至能将 iPhone 变为一个移动“弱网路由器”。"
---

# 打造随身弱网模拟器：详解 iOS 原生 Network Link Conditioner

在 iOS 开发与测试中，弱网测试（Weak Network Testing）是必不可少的一环。与其每次都依赖 `Charles`/`Fiddler` 进行复杂的代理配置，不如利用苹果在 iOS 系统底层内置的神器——**Network Link Conditioner**。

它不仅能模拟带宽限制，还能精准控制丢包率（Packet Loss）、延迟（Latency）和 DNS 延迟，且对 TCP 和 UDP 协议均有效。

以下是完整的启用与使用指南。

---

### 第一步：“召唤”隐藏的开发者菜单

默认情况下，iPhone 的`设置`中是隐藏`开发者`选项的。你需要通过以下任一方式激活它（只需激活一次，永久有效）：

*   **如果你是开发者 (Mac + Xcode)：**
    1. 将 iPhone 连接至 Mac。
    2. 打开 Xcode，点击菜单栏 `Window` > `Devices and Simulators`。
    3. 待 Xcode 识别设备后，手机`设置`主页即会出现`开发者`选项。

*   **如果你是测试/非开发人员 (Windows / 无 Xcode)：**
    1. 下载并安装第三方管理工具（如爱思助手、iMazing 等）。
    2. 连接手机，在工具箱中找到“开启开发者模式”或类似功能（通常只需点击一下触发系统识别）。

> **⚠️ 注意 (iOS 16 及以上用户)：**
> 激活后，可能还需要手动授权。请前往 `设置` > `隐私与安全性` > 拉到底部找到 `开发者模式` > 开启并重启手机。

---

### 第二步：开启弱网模拟

激活菜单后，即可随时随地进行弱网设置，无需再连接电脑。

1.  打开 iPhone `设置` (`Settings`)。
2.  向下滑动，点击 `开发者` (`Developer`)。
3.  在 `Networking` 区域，点击 `Network Link Conditioner`。
4.  开启顶部的 `Enable` 开关。
5.  在下方列表中选择预设的网络环境。

**常用预设说明：**

| 预设名称           | 主要特点                         | 适用场景                                |
| ------------------ | -------------------------------- | --------------------------------------- |
| `100% Loss`        | 100% 丢包                        | 模拟完全断网，测试重连机制              |
| `Edge` / `3G`      | 低带宽、中高延迟                 | 测试慢加载下的 UI 骨架屏或超时逻辑      |
| `Very Bad Network` | 高延迟、高丢包、低带宽的恶劣环境 | 压力测试，检验 App 在极端情况下的稳定性 |
| `High Latency DNS` | DNS 解析延迟高                   | 模拟 DNS 解析缓慢对首次加载的影响       |

---

### 第三步：自定义你的专属弱网环境

除了系统预设，你还可以创建完全自定义的弱网配置，以满足特定的测试需求。

1. 在 `Network Link Conditioner` 页面，点击 `Add a profile...`。
2. 为你的配置命名，例如“高延迟办公网”。
3. 手动调整以下参数：
   - **In Bandwidth / Out Bandwidth**：分别设置下行和上行带宽（单位 `Kbps`）。
   - **In Packets Loss / Out Packets Loss**：设置下行和上行丢包率（`%`）。
   - **Latency**：网络延迟（单位 `ms`）。
   - **DNS Delay**：DNS 解析延迟（单位 `ms`）。
   - **Protocol**：选择影响的协议（`TCP`/`UDP`/`Any`）。
4. 点击 `Save` 保存。之后你就可以在列表中选择这个自定义配置了。


---

### 第四步：进阶技巧——作为“弱网路由器”

这是一个非常实用的“野路子”。由于 `Network Link Conditioner` 是作用于系统网卡底层的，**它会影响通过这台 iPhone 转发的所有流量**。

**操作场景：**
你需要测试安卓手机、笔记本电脑、智能电视或 IoT 设备的弱网表现，但这些设备很难安装测试工具。

**操作方法：**
1.  在 iPhone 上开启 `Network Link Conditioner` 并设定弱网配置（如 `3G`）。
2.  在 iPhone 上开启 **个人热点**。
3.  让其他设备连接这台 iPhone 的热点。

**结果：** 连接热点的所有设备，都将强制处于你设定的弱网环境中。这台 iPhone 瞬间变身为一个硬件级的“弱网模拟器”。

---

### ⛔️ 第五步：测试完请务必关闭！

这是使用该功能最大的“坑”。**`Network Link Conditioner` 不会在你退出设置后自动关闭。**

*   **现象：** 测试结束后，你会发现手机刷视频卡顿、App 下载极慢，甚至误以为手机坏了。
*   **操作：** 测试完成后，务必第一时间回到 `设置` > `开发者` > `Network Link Conditioner` 关闭 `Enable` 开关。

---

### 总结

*   **优势**：系统级模拟（支持 UDP）、无需持续连接电脑、操作简单、可共享给热点设备。
*   **劣势**：无法像 `Charles` 那样查看具体的数据包内容。
*   **建议**：单纯测试 App 在恶劣网络下的稳定性（Crash、卡顿、重连），首选此方案；如果需要排查具体接口数据问题，请配合 `Charles` 使用。
